<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grid 100x100</title>
    <style>
        .grid-container {
            display: grid;
            grid-template-columns: repeat(100, 10px);
            grid-template-rows: repeat(100, 10px);
            gap: 0px;
        }
        .grid {
            width: 10px;
            height: 10px;
            background-color: lightgrey;
            
            
        }
        .centro {
            background-color: grey;
        }
        .lateral {
            background-color: grey;
        }
        .bola {
            background-color:black;
            border-radius: 5px;
        }
        .tijolo{
            background-color: red;
            border-radius: 5px;
            
        }
    </style>
</head>
<body>
    <div class="grid-container">
    </div>
    <script>
        const container = document.querySelector('.grid-container');
        let brick=[]
        for(i=0;i<97;i++){
            brick.push(i,i+100,i+300,i+400)
            i+=4
        }
        // Configuração do grid
        for (let i = 0; i < 5000; i++) {
            const item = document.createElement('div');
            item.classList.add('grid');
            container.appendChild(item);
        }
        for(let i=0;i<brick.length;i++){
               container.children[brick[i]].classList.add('tijolo');
               container.children[brick[i]+2].classList.add('tijolo');
               container.children[brick[i]+1].classList.add('tijolo');
        }
        let dir=-100
        let lat = -1
        let ang = 0;
        // Posição inicial da bola
        let position = 4961;
        container.children[position].classList.add('centro');
        container.children[position-1].classList.add('lateral');
        container.children[position+1].classList.add('lateral');
        let pong = 892;
        let pung;
        function move() {
            if (pong < 4899) {
                container.children[pong].classList.remove('bola');
                pong += dir+lat;
                if(pong==position||pong+1==position||pong==position+1&&Math.abs(lat)<2)
                {
                    pong-=200;
                    dir=-dir;
                    
                }
                for(i=0;i<500;i++){
                if(pong==brick[i]||pong==brick[i]+1||pong==brick[i]+2){
                    container.children[brick[i]].classList.remove('tijolo');
                    container.children[brick[i]+1].classList.remove('tijolo');
                    container.children[brick[i]+2].classList.remove('tijolo');
                    if(brick[i]>100)
                    {
                    container.children[brick[i]-100].classList.remove('tijolo');
                    container.children[brick[i]-99].classList.remove('tijolo');
                    container.children[brick[i]-98].classList.remove('tijolo');
                    }
                    container.children[brick[i]+102].classList.remove('tijolo');
                    container.children[brick[i]+101].classList.remove('tijolo');
                    container.children[brick[i]+100].classList.remove('tijolo');
                    brick.splice(i,3)
                    brick.splice(i-2,3)
                    brick.splice(i+100,3)

                    if(lat==0)
                    {
                        pong+=200;
                        dir=Math.abs(dir);
                    }
                    if(lat>0&&brick[i]<100||brick[i]>200&&brick[i]<400)
                    {
                        lat=-lat;
                        pong-=2;
                    }
                    if(lat<0&&brick[i]<100||brick[i]>200&&brick[i]<400)
                    {
                        lat=Math.abs(lat);
                        pong+=2;
                    }
                    
                    
                    

                 
                }
            }
                container.children[pong].classList.add('bola');
            }
            
            if(pong+100==position||pong+101==position||pong+99==position){
                dir=-dir
            }
            if(pong+99==position&&lat<2){
                lat++;
            }
            if(pong+101==position&&lat>-2){
                lat--;
            }
            if(pong+98==position&&lat==-2){
                lat++;
            }
            if(pong+102==position&&lat==2){
                lat--;
            }
            if((pong+1)%100==0||lat==2&&(pong+2)%100==0){
                lat=-lat;
            }
            if(pong%100==0){
                lat=Math.abs(lat);
            }
            if(pong<100)
            {
                dir=Math.abs(dir);
            }
    
            
        }

        
        // Velocidade da bola
        setInterval(move, 80);;

        // Evento que le a tecla apertada pelo usuario
        document.addEventListener('keydown', (event) => {
            const key = event.key;
            
        container.children[pong].classList.add('bola');

        // Movimento da raquete
        

            if (key === 'd') {
                if (position < 4998) { 
                    container.children[position-1].classList.remove('centro','lateral');
                    
                    position++;
                    container.children[position+1].classList.add('lateral');
                    
                }
            } else if (key === 'a') {
                if (position > 4901) { //Testa o limite lateral esquerdo
                    container.children[position+1].classList.remove('centro','lateral');
                    position--;
                    container.children[position-1].classList.add('lateral');
                }
            }
        });
        
    </script>
</body>
</html>